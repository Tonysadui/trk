# Attendance (TRK)

Небольшое SPA для учёта посещаемости. Теперь рядом с HTML добавлен лёгкий сервер на встроенных модулях Node.js, который обрабатывает авторизацию и хранит данные.

## Запуск

1. Убедитесь, что установлен Node.js 18+.
2. В корне проекта выполните:
   ```bash
   node server.js
   ```
3. Откройте браузер: http://localhost:3000

Дефолтные учётные данные: `admin` / `admin123`.

## Что делает сервер

- `POST /api/login` — выдаёт токен после проверки логина/пароля.
- `GET /api/state` — возвращает текущее состояние (студенты, группы, посещаемость).
- `POST /api/state/merge` — сохраняет присланное состояние и проставляет новое `updatedAt`.
- `POST /api/student` — добавляет студента (создаёт группу, если её нет).
- `DELETE /api/student/:id` — удаляет студента и его отметки.
- `POST /api/attendance` / `GET /api/attendance/:date` — запись и получение посещаемости за день.
- `POST /api/changePassword` — смена пароля текущего пользователя (минимум 6 символов).

Все запросы, кроме `/api/login`, требуют заголовок `Authorization: Bearer <token>`.

Данные хранятся в `data.json` рядом с сервером. При первом запуске файл заполняется начальными значениями, если он повреждён или отсутствует.
