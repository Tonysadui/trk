<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Вход — Attendance</title>
 <link rel="stylesheet" href="modern.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  body {
    font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: #f8fafc;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 12px;
  }

  .container {
    width: 100%;
    max-width: 400px;
  }

  .box {
    background: #fff;
    padding: 32px 22px 24px 22px;
    border-radius: 14px;
    box-shadow: 0 2px 16px rgba(30,41,59,0.07);
  }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .container { width: 100%; max-width: 420px; }
    .box {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      padding: 48px 32px;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      animation: slideUp 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .logo-section { text-align: center; margin-bottom: 40px; }
    .logo {
      width: 64px; height: 64px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 12px;
      display: flex; align-items: center; justify-content: center;
      color: white; font-weight: 700; font-size: 28px;
      margin: 0 auto 16px;
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
      overflow: hidden;
    }
    .logo img { width: 100%; height: 100%; object-fit: contain; }
    h2 { color: #1a1a2e; font-size: 28px; margin: 0 0 12px 0; font-weight: 700; }
    .subtitle { color: #7a8aad; font-size: 14px; margin-bottom: 32px; }
    .form-group { margin-bottom: 16px; }
    input {
      width: 100%; padding: 14px 16px;
      border: 2px solid #e0e3f0; border-radius: 10px;
      background: #f8f9fb; color: #1a1a2e; font-size: 15px; font-family: inherit;
      transition: all 0.3s ease;
    }
    input:focus {
      outline: none; border-color: #667eea; background: white;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    input::placeholder { color: #a5aec0; }
    button {
      width: 100%; padding: 14px 16px; margin-top: 24px;
      border-radius: 10px; border: none;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white; font-weight: 700; cursor: pointer; font-size: 15px;
      transition: all 0.3s ease;
      box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
    }
    button:active { transform: translateY(0); }
    .muted { color: #7a8aad; font-size: 13px; margin-top: 16px; text-align: center; }
    .error {
      color: #e74c3c; margin-top: 12px; padding: 12px 16px;
      background: #fee; border-radius: 8px; font-size: 14px; display: none;
    }
    .error:not(:empty) { display: block; }
    @media (max-width: 480px) {
      .box { padding: 32px 24px; }
      h2 { font-size: 24px; }
      input, button { font-size: 16px; padding: 12px 14px; }
    }
  </style>
        <p class="subtitle">Система управления посещаемостью</p>
      </div>
      <div class="form-group">
          <label for="login">Логин</label>
          <input id="login" class="input" type="text" placeholder="admin" value="admin" />
      </div>
      <div class="form-group">
          <label for="password">Пароль</label>
          <input id="password" class="input" type="password" placeholder="••••••••" />
      </div>
        <button id="loginBtn" class="btn glassy" onclick="doLogin()">Войти</button>
      <div id="error" class="error"></div>
      <div class="muted">Только для сотрудников и студентов колледжа</div>
    </div>
  </div>
  <script>
async function doLogin(){
  const btn = document.getElementById('loginBtn');
  const errorEl = document.getElementById('error');
  errorEl.textContent = '';
  
  const login = document.getElementById('login').value.trim();
  const password = document.getElementById('password').value;
  
  if(!login || !password) {
    errorEl.textContent = 'Заполните логин и пароль';
    return;
  }

  btn.disabled = true;
  btn.textContent = 'Подождите...';

  try {
    const res = await fetch('/api/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ login, password })
    });
    const data = await res.json();
    if(!data.ok){ 
      errorEl.textContent = data.error || 'Ошибка входа'; 
      btn.disabled = false;
      btn.textContent = 'Войти';
      return; 
    }
    localStorage.setItem('token', data.token);
    location.href = '/index.html';
  } catch(err){ 
    errorEl.textContent = 'Ошибка сети — проверьте подключение'; 
    console.error(err); 
    btn.disabled = false;
    btn.textContent = 'Войти';
  }
}
document.getElementById('password').addEventListener('keypress', (e)=> { 
  if(e.key==='Enter' && !document.getElementById('loginBtn').disabled) doLogin(); 
});
document.getElementById('login').addEventListener('keypress', (e)=> { 
  if(e.key==='Enter') document.getElementById('password').focus(); 
});
  </script>
</body>
</html>
